# ç½‘æ ¼ä¸–ç•Œå¼ºåŒ–å­¦ä¹ é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç½‘æ ¼ä¸–ç•Œå¼ºåŒ–å­¦ä¹ é¡¹ç›®ï¼Œå®ç°äº†å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰å’Œç­–ç•¥è¿­ä»£ï¼ˆPolicy Iterationï¼‰ç®—æ³•ï¼Œå¹¶æä¾›äº†å‘½ä»¤è¡Œæ¼”ç¤ºå’ŒWebå¯è§†åŒ–ç•Œé¢ã€‚

## é¡¹ç›®ç»“æ„

```
reinforcement_learning_code/
â”œâ”€â”€ rl/                          # ä¸»åŒ…ç›®å½•
â”‚   â”œâ”€â”€ __init__.py             # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒç®—æ³•æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ grid_world.py        # 2x2ç½‘æ ¼ä¸–ç•Œç¯å¢ƒï¼ˆç¤ºä¾‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ grid_world_dynamic.py # åŠ¨æ€ç½‘æ ¼ä¸–ç•Œç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ value_iteration.py   # å€¼è¿­ä»£ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ policy_iteration.py  # ç­–ç•¥è¿­ä»£ç®—æ³•
â”‚   â”‚   â””â”€â”€ visualize.py        # å¯è§†åŒ–å·¥å…·ï¼ˆmatplotlibï¼‰
â”‚   â”œâ”€â”€ web/                     # Webåº”ç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ app.py               # Flaskåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ templates/           # HTMLæ¨¡æ¿
â”‚   â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”‚   â””â”€â”€ static/              # é™æ€æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ app.js           # å‰ç«¯JavaScript
â”‚   â””â”€â”€ examples/                # ç¤ºä¾‹ä»£ç 
â”‚       â”œâ”€â”€ main.py              # å‘½ä»¤è¡Œæ¼”ç¤º
â”‚       â””â”€â”€ main.ipynb          # Jupyter notebookæ¼”ç¤º
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–
â”œâ”€â”€ run_server.sh               # WebæœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                   # æœ¬æ–‡æ¡£
```

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **ç½‘æ ¼ä¸–ç•Œç¯å¢ƒ**: æ”¯æŒå›ºå®š2x2ç½‘æ ¼å’ŒåŠ¨æ€ä»»æ„å¤§å°ç½‘æ ¼
- âœ… **å€¼è¿­ä»£ç®—æ³•**: é€šè¿‡è¿­ä»£æ›´æ–°å€¼å‡½æ•°æ‰¾åˆ°æœ€ä¼˜ç­–ç•¥
- âœ… **ç­–ç•¥è¿­ä»£ç®—æ³•**: é€šè¿‡ç­–ç•¥è¯„ä¼°å’Œæ”¹è¿›æ‰¾åˆ°æœ€ä¼˜ç­–ç•¥
- âœ… **å¯è§†åŒ–å·¥å…·**: ä½¿ç”¨matplotlibå¯è§†åŒ–ç½‘æ ¼ã€å€¼å‡½æ•°å’Œç­–ç•¥

### Webåº”ç”¨åŠŸèƒ½
- ğŸ® **åŠ¨æ€ç½‘æ ¼é…ç½®**: æ”¯æŒ2x2åˆ°10x10çš„ä»»æ„å¤§å°ç½‘æ ¼
- ğŸ”„ **å¤šç§ç®—æ³•**: æ”¯æŒå€¼è¿­ä»£å’Œç­–ç•¥è¿­ä»£
- ğŸ“Š **å®æ—¶å¯è§†åŒ–**: å®æ—¶æ˜¾ç¤ºå€¼å‡½æ•°å’Œæœ€ä¼˜ç­–ç•¥
- ğŸ¬ **è¿­ä»£åŠ¨ç”»**: æ”¯æŒé€æ­¥æŸ¥çœ‹å’Œè‡ªåŠ¨æ’­æ”¾è¿­ä»£è¿‡ç¨‹
- ğŸ¨ **ç¾è§‚ç•Œé¢**: ç°ä»£åŒ–çš„æ¸å˜è®¾è®¡å’Œå“åº”å¼å¸ƒå±€

## å®‰è£…

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. éªŒè¯å®‰è£…

```python
from rl import GridWorld, ValueIteration
env = GridWorld()
print(f"çŠ¶æ€æ•°: {env.n_states}")
```

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œæ¼”ç¤º

è¿è¡Œå‘½ä»¤è¡Œæ¼”ç¤ºç¨‹åºï¼š

```bash
python -m rl.examples.main
```

### Jupyter Notebook

æ‰“å¼€ `rl/examples/main.ipynb` åœ¨Jupyterä¸­è¿è¡Œã€‚

### Webåº”ç”¨

å¯åŠ¨WebæœåŠ¡å™¨ï¼š

```bash
python -m rl.web.app
```

æˆ–è€…ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
./run_server.sh
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š`http://localhost:8030`

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨æ ¸å¿ƒæ¨¡å—

```python
from rl import GridWorldDynamic, ValueIteration

# åˆ›å»º4x4ç½‘æ ¼ä¸–ç•Œ
env = GridWorldDynamic(width=4, height=4)

# è¿è¡Œå€¼è¿­ä»£
solver = ValueIteration(env, gamma=0.9, theta=1e-6)
result = solver.solve(max_iterations=1000)

print(f"è¿­ä»£æ¬¡æ•°: {result['iterations']}")
print(f"å€¼å‡½æ•°: {result['V']}")
print(f"ç­–ç•¥: {result['policy']}")
```

### ä½¿ç”¨Web API

```python
import requests

# åˆ›å»ºç¯å¢ƒ
response = requests.post('http://localhost:8030/api/create_env', json={
    'width': 4,
    'height': 4,
    'default_reward': -0.04,
    'terminal_reward': 1.0
})
env = response.json()['env']

# è¿è¡Œç®—æ³•
response = requests.post('http://localhost:8030/api/solve', json={
    'algorithm': 'value_iteration',
    'env': env,
    'gamma': 0.9,
    'theta': 1e-6,
    'max_iterations': 1000
})
result = response.json()['result']
```

## ç®—æ³•è¯´æ˜

### å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰

å€¼è¿­ä»£é€šè¿‡ä¸æ–­æ›´æ–°å€¼å‡½æ•°ç›´åˆ°æ”¶æ•›æ¥æ‰¾åˆ°æœ€ä¼˜ç­–ç•¥ï¼š

1. åˆå§‹åŒ–å€¼å‡½æ•° V(s) = 0
2. å¯¹æ¯ä¸ªçŠ¶æ€ï¼Œè®¡ç®—æ‰€æœ‰åŠ¨ä½œçš„æœŸæœ›å€¼ï¼Œå–æœ€å¤§å€¼æ›´æ–°V(s)
3. é‡å¤æ­¥éª¤2ç›´åˆ°å€¼å‡½æ•°æ”¶æ•›
4. ä»æ”¶æ•›çš„å€¼å‡½æ•°ä¸­æå–æœ€ä¼˜ç­–ç•¥

**ä¼˜ç‚¹**: å®ç°ç®€å•ï¼Œä¸éœ€è¦æ˜¾å¼ç»´æŠ¤ç­–ç•¥  
**ç¼ºç‚¹**: é€šå¸¸éœ€è¦æ›´å¤šè¿­ä»£æ¬¡æ•°

### ç­–ç•¥è¿­ä»£ï¼ˆPolicy Iterationï¼‰

ç­–ç•¥è¿­ä»£é€šè¿‡ç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›çš„äº¤æ›¿è¿›è¡Œæ¥æ‰¾åˆ°æœ€ä¼˜ç­–ç•¥ï¼š

1. åˆå§‹åŒ–éšæœºç­–ç•¥
2. **ç­–ç•¥è¯„ä¼°**: è®¡ç®—å½“å‰ç­–ç•¥çš„å€¼å‡½æ•°
3. **ç­–ç•¥æ”¹è¿›**: æ ¹æ®å€¼å‡½æ•°æ”¹è¿›ç­–ç•¥
4. é‡å¤æ­¥éª¤2-3ç›´åˆ°ç­–ç•¥ç¨³å®š

**ä¼˜ç‚¹**: é€šå¸¸æ”¶æ•›æ›´å¿«  
**ç¼ºç‚¹**: æ¯æ¬¡è¿­ä»£éœ€è¦å®Œæ•´çš„ç­–ç•¥è¯„ä¼°

## å‚æ•°è¯´æ˜

- **gamma (Î³)**: æŠ˜æ‰£å› å­ï¼ŒèŒƒå›´[0, 1]ï¼Œæ§åˆ¶æœªæ¥å¥–åŠ±çš„é‡è¦æ€§
- **theta (Î¸)**: æ”¶æ•›é˜ˆå€¼ï¼Œå€¼å‡½æ•°å˜åŒ–å°äºæ­¤å€¼æ—¶è®¤ä¸ºæ”¶æ•›
- **max_iterations**: æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œé˜²æ­¢æ— é™å¾ªç¯
- **default_reward**: é»˜è®¤å¥–åŠ±ï¼Œæ¯æ­¥ç§»åŠ¨çš„å¥–åŠ±
- **terminal_reward**: ç»ˆç«¯å¥–åŠ±ï¼Œåˆ°è¾¾ç»ˆç«¯çŠ¶æ€çš„å¥–åŠ±

## å¼€å‘

### ä»£ç ç»“æ„è¯´æ˜

- `rl/core/`: æ ¸å¿ƒç®—æ³•å®ç°ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨
- `rl/web/`: Webåº”ç”¨ï¼Œä¾èµ–coreæ¨¡å—
- `rl/examples/`: ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨coreæ¨¡å—

### æ·»åŠ æ–°ç®—æ³•

1. åœ¨ `rl/core/` ä¸­åˆ›å»ºæ–°æ–‡ä»¶
2. å®ç°ç®—æ³•ç±»ï¼Œç»§æ‰¿æˆ–å‚è€ƒç°æœ‰ç®—æ³•æ¥å£
3. åœ¨ `rl/core/__init__.py` ä¸­å¯¼å‡º
4. åœ¨ `rl/web/app.py` ä¸­æ·»åŠ APIæ”¯æŒ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼
